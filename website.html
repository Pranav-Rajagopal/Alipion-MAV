<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Elite Sci-Tech Prototype</title>

<!-- Fonts + GSAP -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

<style>
  :root{
    --neon:#00ff7f;
    --bg:#000;
  }
  html,body{height:100%;margin:0;background:var(--bg);color:var(--neon);font-family:"Poppins",sans-serif;-webkit-font-smoothing:antialiased;}
  #gridBg{position:fixed;inset:0;z-index:-2;opacity:.35;background:
    radial-gradient(circle, rgba(0,255,127,0.04) 0%, rgba(0,0,0,0.95) 70%),
    repeating-linear-gradient(#003d26 0px,#003d26 2px,transparent 2px,transparent 44px),
    repeating-linear-gradient(90deg,#003d26 0px,#003d26 2px,transparent 2px,transparent 44px);
  }

  /* Intro */
  #intro{position:fixed;inset:0;display:flex;flex-direction:column;gap:20px;align-items:center;justify-content:center;z-index:30;background:linear-gradient(180deg, rgba(0,0,0,0.98), rgba(0,0,0,0.92));}
  #typingText{font-size:3.6rem;font-weight:700;text-align:center;text-shadow:0 0 28px var(--neon);}
  #startBtn{margin-top:8px;padding:14px 36px;border-radius:10px;border:2px solid var(--neon);background:transparent;color:var(--neon);font-weight:700;cursor:pointer;transition:transform .18s, box-shadow .18s;}
  #startBtn:hover{transform:scale(1.04);box-shadow:0 0 16px var(--neon);background:var(--neon);color:#000;}

  /* Founders */
  #foundersIntro{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;gap:36px;z-index:28;pointer-events:none;opacity:0;}
  .founderCard{width:280px;height:420px;border-radius:14px;border:1px solid rgba(0,255,127,0.35);overflow:hidden;background:linear-gradient(180deg, rgba(0,0,0,0.8), rgba(0,0,0,0.6));display:flex;flex-direction:column;align-items:center;justify-content:flex-start;box-shadow:0 10px 40px rgba(0,255,127,0.06);transform:translateY(30px);}
  .founderCard img{width:100%;height:72%;object-fit:cover;display:block;}
  .founderCard .meta{padding:12px;text-align:center;}
  .founderCard .meta h3{margin:0;font-size:1.05rem;letter-spacing:.6px;}
  .founderCard .meta p{margin:6px 0 0;font-size:.88rem;color:rgba(0,255,127,0.9);opacity:.95;}

  /* Main */
  #main{opacity:0;visibility:hidden;position:relative;z-index:1;}
  header{padding:28px 36px;display:flex;justify-content:space-between;align-items:center;}
  .logo{font-weight:700;letter-spacing:1px;}

  /* side nav */
  #nav{position:fixed;right:18px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:10px;z-index:18;}
  .nav-item{padding:8px 12px;border-radius:8px;border:1px solid rgba(0,255,127,0.18);background:rgba(0,0,0,0.4);cursor:pointer;backdrop-filter: blur(6px);transition:transform .22s, box-shadow .22s;}
  .nav-item:hover{transform:scale(1.06);box-shadow:0 0 14px rgba(0,255,127,0.18);border-color:var(--neon);}

  section{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 20px;text-align:center;gap:18px;opacity:0;}
  .title{font-size:2.2rem;font-weight:700;text-shadow:0 0 18px rgba(0,255,127,0.12);}
  .sub{max-width:980px;color:rgba(0,255,127,0.92);line-height:1.7;font-size:1.02rem;}
  .panel{max-width:1100px;width:100%;margin-top:18px;display:flex;gap:20px;align-items:stretch;justify-content:center;flex-wrap:wrap;}
  .media-preview{width:640px;max-width:92%;height:360px;border-radius:12px;overflow:hidden;border:1px solid rgba(0,255,127,0.12);box-shadow:0 12px 40px rgba(0,255,127,0.03);}

  .blog-card{background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.5));border-radius:12px;padding:18px;text-align:left;border:1px solid rgba(0,255,127,0.06);}

  /* chat */
  #chatBtn{position:fixed;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;border:2px solid var(--neon);background:rgba(0,255,127,0.06);display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:20;box-shadow:0 8px 30px rgba(0,255,127,0.03);}
  #chatBox{position:fixed;right:20px;bottom:88px;width:300px;background:rgba(0,0,0,0.9);backdrop-filter:blur(8px);border-radius:12px;border:1px solid rgba(0,255,127,0.12);padding:14px;display:none;z-index:21;}
  .qBtn{display:block;width:100%;padding:8px;margin:8px 0;border-radius:8px;border:1px solid rgba(0,255,127,0.12);background:transparent;color:var(--neon);cursor:pointer;text-align:left;}
  .answer{margin-top:6px;opacity:0;color:rgba(0,255,127,0.95);transition:opacity .25s;}

  @media (max-width:720px){ #typingText{font-size:2.2rem;} .founderCard{width:200px;height:320px;} .media-preview{height:220px;} .title{font-size:1.6rem;} }
</style>
</head>
<body>

<div id="gridBg"></div>

<!-- audio elements (put files in /assets/) -->
<audio id="enterSound" src="assets/enter.mp3" preload="auto"></audio>
<audio id="bgSound" src="assets/bg-loop.mp3" preload="auto" loop></audio>

<!-- Intro -->
<div id="intro" aria-hidden="false">
  <div id="typingText">Ready to dive in?</div>
  <button id="startBtn" aria-label="Enter site">Enter</button>
</div>

<!-- Founders cinematic overlay -->
<div id="foundersIntro" role="dialog" aria-hidden="true">
  <div class="founderCard" id="card-vish">
    <img src="assets/Vishwajeeth.jpg" alt="Vishwajeeth photo (place file at assets/Vishwajeeth.jpg)">
    <div class="meta"><h3>Vishwajeeth V</h3><p>Lead Rocket Engineer</p></div>
  </div>

  <div class="founderCard" id="card-adhi">
    <img src="assets/Adhikesav.jpg" alt="Adhikesav photo (place file at assets/Adhikesav.jpg)">
    <div class="meta"><h3>Adikeshav S</h3><p>Systems & Control Engineer</p></div>
  </div>

  <div class="founderCard" id="card-mahi">
    <img src="assets/Mahilesh.jpg" alt="Mahilesh photo (place file at assets/Mahilesh.jpg)">
    <div class="meta"><h3>Mahilesh</h3><p>Operations & Mission Support</p></div>
  </div>
</div>

<!-- Main content (hidden until founders animation finished) -->
<div id="main" aria-hidden="true">
  <header>
    <div class="logo">SNP • Morphine Engine</div>
    <div style="opacity:.6;font-size:.95rem">Prototype • Research • Education</div>
  </header>

  <div id="nav" aria-hidden="false">
    <div class="nav-item" data-target="product">Product</div>
    <div class="nav-item" data-target="vision">Vision</div>
    <div class="nav-item" data-target="propulsion">Propulsion</div>
    <div class="nav-item" data-target="safety">Safety</div>
    <div class="nav-item" data-target="ai">AI / Landing</div>
    <div class="nav-item" data-target="blog">Blog</div>
  </div>

  <!-- Product -->
  <section id="product">
    <div class="title">Rocket Prototype</div>
    <p class="sub">High-fidelity prototype featuring AI-assisted landing and a fuel-fed propulsion core. (Add high-res images or video below)</p>

    <div class="panel">
      <div class="media-preview blog-card">
        <img src="assets/placeholder-rocket.jpg" alt="Rocket placeholder - add rocket images to assets" style="width:100%;height:100%;object-fit:cover;">
      </div>
      <div style="max-width:420px;text-align:left;">
        <h4 style="margin:0 0 12px 0;">Prototype highlights</h4>
        <ul style="text-align:left;color:rgba(0,255,127,0.85);line-height:1.6;">
          <li>AI-integrated landing stabilization</li>
          <li>3D printed SS304L nozzle components</li>
          <li>Modular propulsion testbed</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Vision -->
  <section id="vision">
    <div class="title">Project Vision</div>
    <p class="sub">Democratize aerospace research and bring scalable student innovation to competition arenas and real-world tests.</p>
  </section>

  <!-- Propulsion -->
  <section id="propulsion">
    <div class="title">Propulsion & Materials</div>
    <div class="panel" style="max-width:1000px;">
      <div class="blog-card" style="flex:1;">
        <h4>Materials & Hardware</h4>
        <p>3D-printed SS 304L structural elements, Teflon seals, A2212 BLDC actuators and MPU-6050 IMU for stabilization and telemetry.</p>
      </div>
      <div class="blog-card" style="flex:1;">
        <h4>Chemistry & Performance</h4>
        <p>Engine testing used controlled propellant concentrations. Parent institution provided safety protocols and lab supervision for high-concentration propellants (80%–99.9%).</p>
      </div>
    </div>
  </section>

  <!-- Safety -->
  <section id="safety">
    <div class="title">Safety & Protocol</div>
    <p class="sub">All chemical handling and testing followed school-supervised protocols and expert guidance to minimize risk during development and experiments.</p>
  </section>

  <!-- AI -->
  <section id="ai">
    <div class="title">AI Assisted Landing</div>
    <p class="sub">AI algorithms were used for descent control and stabilization — a key capability that brings student-built projects closer to practical demonstration.</p>
  </section>

  <!-- Blog (subdivided content and YouTube preview) -->
  <section id="blog">
    <div class="title">Blog — How SNP Helped Build The Morphine</div>

    <div class="panel" style="flex-direction:column;align-items:center;">
      <div class="blog-card" style="max-width:1000px;">
        <h4>Overview</h4>
        <p>The rocket engine was created through constant hard work by <strong>Vishwajeeth V</strong> and supported by <strong>Adikeshav S</strong> of XI Topaz. Shree Niketan Patasala, West Tambaram, provided facilities, mentorship and technical backing.</p>

        <h4>School's role</h4>
        <p>The school provided workshop access, connected students with specialist teachers, and enforced safety procedures that allowed high-concentration propellant experimentation under supervision.</p>

        <h4>Technical highlights</h4>
        <p>Core materials and components include 3D-printed SS304L, Teflon seals, A2212 BLDC motors and an MPU-6050 IMU. The project applies CBSE concepts from classes 9–11: Newton’s laws, thermodynamics, thermochemistry, combustion and projectile motion.</p>

        <h4>Competitions & verification</h4>
        <p>References and results were verified by SNP management. The school enabled participation at events like the CBSE Science Expo.</p>
      </div>

      <!-- Video preview / embed -->
      <div style="margin-top:18px;width:100%;max-width:900px;">
        <div class="media-preview">
          <iframe width="100%" height="100%" src="https://www.youtube.com/embed/0x8x2FamBlk?rel=0&modestbranding=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      </div>
    </div>
  </section>

  <footer style="padding:40px 20px;text-align:center;color:rgba(0,255,127,0.7);">
    Credits: Pranav R • SNP Labs
  </footer>
</div>

<!-- Chat -->
<button id="chatBtn" title="Chat (VIPRADMA_07)">◉</button>
<div id="chatBox" role="dialog" aria-hidden="true">
  <strong>VIPRADMA_07</strong>
  <button class="qBtn" onclick="reply(this)">What is this project?</button>
  <div class="answer"></div>
  <button class="qBtn" onclick="reply(this)">Who built this?</button>
  <div class="answer"></div>
  <button class="qBtn" onclick="reply(this)">Future goals?</button>
  <div class="answer"></div>
</div>

<script>
  // Defensive checks
  try {
    if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {
      gsap.registerPlugin(ScrollTrigger);
    }
  } catch (e) {
    console.warn('GSAP/ScrollTrigger registration failed:', e);
  }

  // Safe DOM refs
  const typingText = document.getElementById('typingText');
  const startBtn = document.getElementById('startBtn');
  const intro = document.getElementById('intro');
  const foundersIntro = document.getElementById('foundersIntro');
  const main = document.getElementById('main');
  const nav = document.getElementById('nav');
  const chatBtn = document.getElementById('chatBtn');
  const chatBox = document.getElementById('chatBox');
  const enterSound = document.getElementById('enterSound');
  const bgSound = document.getElementById('bgSound');

  // Provide typed effect optional — kept visible by default.
  // If you want the typing effect uncomment below:
  /*
  const fullMsg = "Ready to dive in?";
  typingText.textContent = "";
  let idx = 0;
  (function type(){ if(idx < fullMsg.length){ typingText.textContent += fullMsg[idx++]; setTimeout(type, 75);} })();
  */

  // start flow
  startBtn.addEventListener('click', () => {
    // play enter sound (user gesture) with graceful rejection handling
    if (enterSound) {
      const p = enterSound.play();
      if (p && p.catch) p.catch(err => console.warn('enterSound play failed (likely blocked):', err));
    }

    // After short pause start founders sequence and background loop
    setTimeout(() => {
      if (bgSound) {
        const q = bgSound.play();
        if (q && q.catch) q.catch(err => console.warn('bgSound play failed (likely blocked):', err));
      }
    }, 1200);

    // Hide intro smoothly
    gsap.to(intro, {opacity:0, y:-120, duration:1.0, ease:"power2.inOut", onComplete(){
      intro.style.display = 'none';

      // Start founder cinematic sequence
      foundersIntro.style.pointerEvents = 'auto';
      foundersIntro.style.opacity = 1;
      foundersIntro.setAttribute('aria-hidden','false');

      const vish = document.getElementById('card-vish');
      const adhi = document.getElementById('card-adhi');
      const mahi = document.getElementById('card-mahi');

      // First founder: enter from left -> pause -> exit left
      gsap.fromTo(vish, {x:-420, opacity:0, scale:0.98}, {x:0, opacity:1, scale:1, duration:1.0, ease:'power3.out'});
      gsap.to(vish, {x:-460, opacity:0, delay:1.6, duration:0.9, ease:'power2.in'});

      // Second founder: enter from right -> pause -> exit right
      gsap.fromTo(adhi, {x:420, opacity:0, scale:0.98}, {x:0, opacity:1, scale:1, duration:1.0, delay:1.9, ease:'power3.out'});
      gsap.to(adhi, {x:460, opacity:0, delay:3.2, duration:0.85, ease:'power2.in'});

      // Third founder: enter from bottom center -> pause -> exit bottom -> reveal main
      gsap.fromTo(mahi, {y:300, opacity:0, scale:0.96}, {y:0, opacity:1, scale:1, duration:1.05, delay:3.6, ease:'power3.out'});
      gsap.to(mahi, {y:320, opacity:0, delay:5.1, duration:0.9, ease:'power2.in', onComplete: finishFounders});
    }});
  });

  function finishFounders(){
    try {
      foundersIntro.style.display = 'none';
      foundersIntro.style.pointerEvents = 'none';
      main.style.visibility = 'visible';

      // reveal main
      gsap.fromTo(main, {opacity:0, y:20}, {opacity:1, y:0, duration:1.1, ease:'power3.out', onComplete: initScrollAnims});
    } catch(err) {
      console.error('finishFounders failed:', err);
    }
  }

  function initScrollAnims(){
    try{
      const sections = document.querySelectorAll('section');
      sections.forEach((sec) => {
        if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {
          gsap.fromTo(sec, {opacity:0, y:30}, {
            opacity:1, y:0, duration:1.0, ease:'power3.out',
            scrollTrigger: { trigger: sec, start: "top 82%", toggleActions: "play none none none" }
          });
        } else {
          // fallback if ScrollTrigger not available
          sec.style.opacity = 1; sec.style.transform = 'translateY(0)';
        }
      });
    } catch(e) {
      console.error('initScrollAnims error:', e);
    }
  }

  // nav scroll
  try {
    nav.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', () => {
        const target = document.getElementById(item.dataset.target);
        if (!target) {
          console.warn('Nav target missing:', item.dataset.target);
          return;
        }
        target.scrollIntoView({behavior: 'smooth', block: 'start'});
      });
    });
  } catch(e){ console.warn('nav init failed', e); }

  // chat
  chatBtn.addEventListener('click', () => {
    try {
      if (chatBox.style.display === 'block') {
        chatBox.style.display = 'none';
        chatBox.setAttribute('aria-hidden','true');
      } else {
        chatBox.style.display = 'block';
        chatBox.setAttribute('aria-hidden','false');
      }
    } catch(e){ console.warn('chat toggle failed', e); }
  });

  function reply(btn){
    const ans = btn.nextElementSibling;
    const q = (btn && btn.textContent) ? btn.textContent.trim() : '';
    let text = '';
    if (q === 'What is this project?') text = 'A student-built fuel-based rocket prototype with AI-assisted landing.';
    else if (q === 'Who built this?') text = 'Developed by students (Vishwajeeth V, Adikeshav S, Mahilesh) with support from SNP school.';
    else if (q === 'Future goals?') text = 'Refine propulsion, improve safety, enter competitions and scale research collaboration.';
    ans.textContent = text;
    ans.style.opacity = 1;
  }
  window.reply = reply;

  // helpful console hook
  window.addEventListener('error', (ev) => { console.error('JS Error:', ev.error || ev.message); });

  // Accessibility: allow Enter key to trigger start
  startBtn.addEventListener('keyup', (e)=>{ if(e.key === 'Enter') startBtn.click(); });

</script>
</body>
</html>
